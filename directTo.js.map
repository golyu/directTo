{"version":3,"file":"directTo.js","sourceRoot":"","sources":["directTo.ts"],"names":[],"mappings":";AAsBA,MAAM,IAAI;IAIR,YAAY,MAAc,EAAE,aAAqB;QAC/C,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;IACrC,CAAC;IAED,SAAS;QACP,OAAO,IAAI,CAAC,MAAM,CAAC;IACrB,CAAC;IAED,QAAQ,CAAC,IAAY;QACnB,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7C,IAAI,MAAM,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YAC/B,OAAO,kBAAkB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SACtC;QACD,OAAO,EAAE,CAAC;IACZ,CAAC;CACF;AAED,MAAM,YAAY,GAAc;IAC9B,IAAI,IAAI,CAAC,SAAS,EAAE,kCAAkC,CAAC;IACvD,IAAI,IAAI,CAAC,SAAS,EAAE,2CAA2C,CAAC;IAChE,IAAI,IAAI,CAAC,OAAO,EAAE,iCAAiC,CAAC;IACpD,IAAI,IAAI,CAAC,QAAQ,EAAE,iCAAiC,CAAC;IACrD,IAAI,IAAI,CAAC,MAAM,EAAE,gCAAgC,CAAC;CACnD,CAAC;AAEF,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;IAC1B,OAAO,CAAC;QACN,IAAI,OAAO,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;YAClD,MAAM,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YACnD,IAAI,GAAG,EAAE;gBACP,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,GAAG,CAAC;gBAC3B,OAAO,IAAI,CAAC;aACb;SACF;QACD,OAAO,KAAK,CAAC;IACf,CAAC,CAAC,EAAE,CAAC;AACP,CAAC,CAAC,CAAC","sourcesContent":["// ==UserScript==\n// @name        跳转链接直达\n// @description 知乎,CSDN,简书,开源中国,掘金 跳转链接直达\n// @namespace   https://github.com/golyu/directTo/issues\n// @version     0.9.0\n// @author      g\n// @include     *://link.zhihu.com/*\n// @include     *://link.csdn.net/*\n// @include     *://link.juejin.cn/*\n// @include     *://www.jianshu.com/go-wild*\n// @include     *://www.oschina.net/action/GoToLink*\n// @license     MIT License ???直接\n// @supportURL  https://github.com/golyu/directTo/issues\n// @run-at      document-start\n// @grant       unsafeWindow\n// ==/UserScript==\ninterface Website {\n  getRegexp(): RegExp;\n\n  getToUrl(href: string): string;\n}\n\nclass Base implements Website {\n  regexp: RegExp;\n  regexpDetails: RegExp;\n\n  constructor(regexp: RegExp, regexpDetails: RegExp) {\n    this.regexp = regexp;\n    this.regexpDetails = regexpDetails;\n  }\n\n  getRegexp(): RegExp {\n    return this.regexp;\n  }\n\n  getToUrl(href: string): string {\n    const result = this.regexpDetails.exec(href);\n    if (result && result.length > 0) {\n      return decodeURIComponent(result[0]);\n    }\n    return \"\";\n  }\n}\n\nconst websiteArray: Website[] = [\n  new Base(/jianshu/, /.*jianshu.com\\/go-wild.*url=(.*)/),\n  new Base(/oschina/, /.*oschina.net\\/action\\/GoToLink.*url=(.*)/),\n  new Base(/zhihu/, /.*link.zhihu.com\\/\\?target=(.*)/),\n  new Base(/juejin/, /.*link.juejin.cn\\/\\?target=(.*)/),\n  new Base(/csdn/, /.*link.csdn.net\\/\\?target=(.*)/),\n];\n\nwebsiteArray.some(website => {\n  return (function (): boolean {\n    if (website.getRegexp().test(window.location.href)) {\n      const url = website.getToUrl(window.location.href);\n      if (url) {\n        window.location.href = url;\n        return true;\n      }\n    }\n    return false;\n  })();\n});\n"]}